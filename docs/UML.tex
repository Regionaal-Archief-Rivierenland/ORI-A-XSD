\documentclass[margin=10pt]{standalone}

\usepackage{tikz}

\usepackage[kerning=true, tracking=true]{microtype}
\usepackage[dutch]{babel}

%% font stuff
\usepackage[]{MyriadPro}
%% math font for myriadpro
\usepackage{mdsymbol}
%% \usepackage[onlymath]{MinionPro}
\usepackage[T1]{fontenc}

%% math symols
\usepackage{amsmath}
\usepackage{mathtools}

\usepackage{inconsolata}
%% computer modern monospace?
%% \usepackage[tt={oldstyle=false,variable=false}]{cfr-lm}


\usepackage{listings}
\usepackage{minted}
\usemintedstyle{vs}

%% Color definitions
\usepackage[dvipsnames]{xcolor}
\definecolor{githubgrey}{HTML}{EAEEF2}
\definecolor{darkgreen}{HTML}{3D5E45}
\definecolor{purple}{HTML}{5C5573}
%% rounded boxes
\usepackage[most]{tcolorbox}

%% for templates
\usepackage{xparse}
\newcommand\mystrut{\rule[-2.5pt]{0pt}{12pt}}
%% datatype typesetting
\newcommand{\datatype}[2][text]{%
    \tcbox[
      on line,
      boxsep=0pt,
      left=2.5pt,
      right=2.5pt,
      top=0pt,
      bottom=0pt,
      enlarge top initially by=-14pt,
      enlarge bottom by=-14pt,
      enlarge right by=-4pt,
      enlarge left by=-2pt,
      opacityframe=0,
      colback=githubgrey,
      fontupper={\ttfamily\mystrut},
      fontlower={\ttfamily\mystrut}]
      {\textcolor{black}{\textbf{#2}}}
}



\begin{document}

%% set default font to myriad pro
%% \renewcommand{\familydefault}{\sfdefault}
\sffamily

\usetikzlibrary{arrows}
\usetikzlibrary{calc}
\usetikzlibrary{arrows.meta}
\usetikzlibrary{shapes.multipart}
\usetikzlibrary{positioning}

%% TODO
%% - check if different number style in Myriad pro looks nice
%%   - not really
%% - try semi boldfont for Attribute names
%%   - too difficult with pdflatex
%% - maybe bullets instead of plusses? Making a proper list also gives more flexibility
%%    - all the more because the plusses serve little purposes


%% Header of boxes
\newcommand{\objectheader}[2]{
  {\textbf{\textcolor{gray}{\guillemotleft#1\guillemotright}}} \\
  {\large \textbf{#2}}
  \nodepart[align=left]{two}
}

%% Attribute typesetting
\newcommand{\attribute}[3]{+ \; #1: \datatype{#2} \; \textcolor{gray}{#3}}

\begin{tikzpicture}[
    %% not sure why the "header" is still centered after align=left, but oh well
    ORI object/.style={rectangle split, rectangle split parts=2,
      draw=black, align=left, rounded corners=5pt, very thick, inner sep=10pt}, align=center]
  
  \node (agendapunt) [ORI object, align=center]
        {
          \objectheader{Objecttype}{Agendapunt}

          \attribute{\textbf{ID}}{string}{} \\
          \attribute{Agendapunt omschrijving}{string}{[0..1]} \\
          \attribute{Gepland agendapuntvolgnummer}{string}{[0..1]} \\
          \attribute{Agendapuntvolgnummer}{string}{[0..1]} \\
          \attribute{Geplande starttijd}{datum + tijd}{[0..1]} \\
          \attribute{Geplande eindtijd}{datum + tijd}{[0..1]} \\
          \attribute{Starttijd}{datum + tijd}{[0..1]} \\
          \attribute{Eindtijd}{datum + tijd}{[0..1]} \\
          \attribute{Agendapunt kenmerk}{string}{[0..1]} \\
          \attribute{Agendapunt titel}{string}{[0..1]} \\
          \attribute{Indicatie hamerstuk}{boolean}{[0..1]} \\
          \attribute{Indicator behandeld}{boolean}{[0..1]} \\
          \attribute{\textbf{Indicator besloten}}{boolean}{} \\
          \attribute{Bestuurslaag}{bestuurslaagGegevens}{[0..1]}
        };

  \node (stemming) [ORI object, below = 4cm of agendapunt, align=center]
        {
          \objectheader{Objecttype}{Stemming}

          \attribute{\textbf{ID}}{string}{} \\
          \attribute{Stemmingstype}{\textcolor{darkgreen}{``Hoofdelijk''} | \textcolor{darkgreen}{``Regulier''} | \textcolor{darkgreen}{``Schriftelijk''}}{[0..1]}\\
          \attribute{Resultaat mondelinge stemming}{\textcolor{darkgreen}{``Voor''} | \textcolor{darkgreen}{``Tegen''} | \textcolor{darkgreen}{``Gelijk''}}{[0..1]} \\
          \attribute{Toezegging}{string}{[0..1]} \\
          \attribute{Resultaat stemming over personen}{string}{[0..1]} \\
          \attribute{Stemming over personen}{stemmingOverPersonenGegevens}{[0..*]}
        };

  \node (besluit) [ORI object, above right = 0.5cm and 2cm of stemming, align=center]
        {
          \objectheader{Objecttype}{Besluit}

          \attribute{ID}{string}{[0..1]} \\
          \attribute{Besluit toelichting}{string}{[0..1]} \\
          \attribute{Toezegging}{string}{[0..1]} \\
          \attribute{\textbf{Besluit resultaat}}{\textcolor{darkgreen}{``Unaniem aangenomen''} | \textcolor{darkgreen}{``Aangenomen''} | ... }{}
        };

        %% arrows
        \draw [-{Straight Barb[length=4mm,width=6mm]}, very thick] (stemming) -- node [anchor=center, fill=white] {heeft betrekking op\\\textcolor{gray}{\textbf{\guillemotleft{relatietype}\guillemotright}}} (agendapunt);
        %% \draw [very thick] ($(stemming.north)+(2.5,0)$) -- node{cool} ++($stemming.north)+(2.5,0)$) --  (besluit);

        
        \draw[->, -{Straight Barb[length=4mm,width=6mm]}, very thick] ($(stemming.north)+(2.5,0)$) |-  (besluit.west) node [fill=white, pos=0.74, above] {leidt tot} node [fill=white, pos=0.74, below] {\textcolor{gray}{\textbf{\guillemotleft{relatietype}\guillemotright}}};

\end{tikzpicture}

\end{document}
